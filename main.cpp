//
//  main.cpp
//  mini640_ieq
//
//  Created by 徐圣源 on 2019/10/31.
//  Copyright © 2019 徐圣源. All rights reserved.
//

#include <iostream>
#include <fstream>
const int b_0=5;
const int b_1=31;
const int b_2=7;
const int b_3=22;
const int b_4=13;
const int n=4;  //三轮攻击
using namespace std;
int madd32(int a,int b){
    if(a+b>=0) return (a+b)%32;
    if(a+b<0) return (a+b+32)%32;
    return 0;
}
int main() {
    ofstream outFile;
    outFile.open("/Users/xushengyuan/Desktop/ieq3.opb",ios::out);
    int i,j,k;
    //目标函数：
    outFile<<"min:";
    for(j=0;j<=n-1;j++){
        for(i=0;i<=31;i++){
            if(i==0&&j==0)outFile<<"c_0_0";
            else outFile<<"+c_"<<j<<"_"<<i;
        }
    }
    for(j=1;j<=n-1;j++){
        for(i=0;i<=31;i++){
            for(k=0;k<=4;k++){
            outFile<<"+a_"<<j<<"_"<<k<<"_"<<i;
        }
        }
    }
    outFile<<";"<<endl;
    //block 0 第一块
    for(i=0;i<=31;i++){
        //去掉S_0_0_w
        outFile<<"c_0_"<<i<<"-a_1_0_"<<madd32(i,b_0)<<"=0;"<<endl;
        //去掉S_0_1_w
        outFile<<"c_0_"<<i<<"-a_1_0_"<<madd32(i,b_0)<<"-a_1_1_"<<madd32(i,b_1)<<"<=0;"<<endl;
        outFile<<"-c_0_"<<i<<"-a_1_0_"<<madd32(i,b_0)<<"+a_1_1_"<<madd32(i,b_1)<<"<=0;"<<endl;
        //去掉S_0_2_w
    outFile<<"-c_0_"<<i<<"-a_1_0_"<<madd32(i,b_0)<<"-a_1_1_"<<madd32(i,b_1)<<"+a_1_2_"<<madd32(i,b_2)<<"<=0;"<<endl;
    outFile<<"c_0_"<<i<<"-a_1_0_"<<madd32(i,b_0)<<"+a_1_1_"<<madd32(i,b_1)<<"+a_1_2_"<<madd32(i,b_2)<<"<=2;"<<endl;
        //去掉S_0_3_w
    outFile<<"-c_0_"<<i<<"-a_1_0_"<<madd32(i,b_0)<<"-a_1_1_"<<madd32(i,b_1)<<"+a_1_2_"<<madd32(i,b_2)<<"-a_1_3_"<<madd32(i,b_3)<<"<=0;"<<endl;
    outFile<<"-c_0_"<<i<<"-a_1_0_"<<madd32(i,b_0)<<"-a_1_1_"<<madd32(i,b_1)<<"-a_1_2_"<<madd32(i,b_2)<<"+a_1_3_"<<madd32(i,b_3)<<"<=0;"<<endl;
    outFile<<"c_0_"<<i<<"-a_1_0_"<<madd32(i,b_0)<<"+a_1_1_"<<madd32(i,b_1)<<"-a_1_2_"<<madd32(i,b_2)<<"+a_1_3_"<<madd32(i,b_3)<<"<=2;"<<endl;
    outFile<<"c_0_"<<i<<"+a_1_0_"<<madd32(i,b_0)<<"+a_1_1_"<<madd32(i,b_1)<<"-a_1_2_"<<madd32(i,b_2)<<"-a_1_3_"<<madd32(i,b_3)<<"<=2;"<<endl;
        //去掉S_0_4_w
    outFile<<"a_1_1_"<<madd32(i,b_1)<<"-a_1_2_"<<madd32(i,b_2)<<"-a_1_3_"<<madd32(i,b_3)<<"-a_1_4_"<<madd32(i,b_4)<<"<=0;"<<endl;
    outFile<<"-a_1_1_"<<madd32(i,b_1)<<"-a_1_2_"<<madd32(i,b_2)<<"-a_1_3_"<<madd32(i,b_3)<<"+a_1_4_"<<madd32(i,b_4)<<"<=0;"<<endl;
    }

        //block 1,2,...,n-1 代表所有中间层
        
        for(j=1;j<=n-2;j++){
            for(i=0;i<=31;i++){
                //去掉S_j_0_i
                outFile<<"a_"<<j<<"_0_"<<i<<"-a_"<<j<<"_3_"<<madd32(i,b_3)<<"-a_"<<j<<"_4_"<<madd32(i,b_4)<<"-c_"<<j<<"_"<<i<<"-a_"<<j+1<<"_0_"<<madd32(i,b_0)<<"-a_"<<j<<"_2_"<<madd32(i,b_2)<<"<=0;"<<endl;
                outFile<<"-a_"<<j<<"_0_"<<i<<"-a_"<<j<<"_3_"<<madd32(i,b_3)<<"-a_"<<j<<"_4_"<<madd32(i,b_4)<<"+c_"<<j<<"_"<<i<<"-a_"<<j+1<<"_0_"<<madd32(i,b_0)<<"-a_"<<j<<"_2_"<<madd32(i,b_2)<<"<=0;"<<endl;
                outFile<<"-a_"<<j<<"_0_"<<i<<"-a_"<<j<<"_3_"<<madd32(i,b_3)<<"-a_"<<j<<"_4_"<<madd32(i,b_4)<<"-c_"<<j<<"_"<<i<<"+a_"<<j+1<<"_0_"<<madd32(i,b_0)<<"-a_"<<j<<"_2_"<<madd32(i,b_2)<<"<=0;"<<endl;
                outFile<<"-a_"<<j<<"_0_"<<i<<"-a_"<<j<<"_3_"<<madd32(i,b_3)<<"-a_"<<j<<"_4_"<<madd32(i,b_4)<<"-c_"<<j<<"_"<<i<<"-a_"<<j+1<<"_0_"<<madd32(i,b_0)<<"+a_"<<j<<"_2_"<<madd32(i,b_2)<<"<=0;"<<endl;
                outFile<<"a_"<<j<<"_0_"<<i<<"-a_"<<j<<"_3_"<<madd32(i,b_3)<<"-a_"<<j<<"_4_"<<madd32(i,b_4)<<"+c_"<<j<<"_"<<i<<"+a_"<<j+1<<"_0_"<<madd32(i,b_0)<<"-a_"<<j<<"_2_"<<madd32(i,b_2)<<"<=2;"<<endl;
                outFile<<"a_"<<j<<"_0_"<<i<<"-a_"<<j<<"_3_"<<madd32(i,b_3)<<"-a_"<<j<<"_4_"<<madd32(i,b_4)<<"+c_"<<j<<"_"<<i<<"-a_"<<j+1<<"_0_"<<madd32(i,b_0)<<"+a_"<<j<<"_2_"<<madd32(i,b_2)<<"<=2;"<<endl;
                outFile<<"a_"<<j<<"_0_"<<i<<"-a_"<<j<<"_3_"<<madd32(i,b_3)<<"-a_"<<j<<"_4_"<<madd32(i,b_4)<<"-c_"<<j<<"_"<<i<<"+a_"<<j+1<<"_0_"<<madd32(i,b_0)<<"+a_"<<j<<"_2_"<<madd32(i,b_2)<<"<=2;"<<endl;
                outFile<<"-a_"<<j<<"_0_"<<i<<"-a_"<<j<<"_3_"<<madd32(i,b_3)<<"-a_"<<j<<"_4_"<<madd32(i,b_4)<<"+c_"<<j<<"_"<<i<<"+a_"<<j+1<<"_0_"<<madd32(i,b_0)<<"+a_"<<j<<"_2_"<<madd32(i,b_2)<<"<=2;"<<endl;
                //去掉S_j_1_i
                outFile<<"a_"<<j<<"_1_"<<i<<"-a_"<<j<<"_3_"<<madd32(i,b_3)<<"-a_"<<j<<"_4_"<<madd32(i,b_4)<<"-c_"<<j<<"_"<<i<<"-a_"<<j+1<<"_0_"<<madd32(i,b_0)<<"-a_"<<j+1<<"_1_"<<madd32(i,b_1)<<"<=0;"<<endl;
                
                outFile<<"a_"<<j<<"_1_"<<i<<"-a_"<<j<<"_3_"<<madd32(i,b_3)<<"+a_"<<j<<"_4_"<<madd32(i,b_4)<<"+c_"<<j<<"_"<<i<<"+a_"<<j+1<<"_0_"<<madd32(i,b_0)<<"+a_"<<j+1<<"_1_"<<madd32(i,b_1)<<">=0;"<<endl;
                
                outFile<<"a_"<<j<<"_1_"<<i<<"+a_"<<j<<"_3_"<<madd32(i,b_3)<<"+a_"<<j<<"_4_"<<madd32(i,b_4)<<"-c_"<<j<<"_"<<i<<"+a_"<<j+1<<"_0_"<<madd32(i,b_0)<<"+a_"<<j+1<<"_1_"<<madd32(i,b_1)<<">=0;"<<endl;
                
                outFile<<"a_"<<j<<"_1_"<<i<<"+a_"<<j<<"_3_"<<madd32(i,b_3)<<"+a_"<<j<<"_4_"<<madd32(i,b_4)<<"+c_"<<j<<"_"<<i<<"+a_"<<j+1<<"_0_"<<madd32(i,b_0)<<"-a_"<<j+1<<"_1_"<<madd32(i,b_1)<<">=0;"<<endl;
                
                outFile<<"a_"<<j<<"_1_"<<i<<"+a_"<<j<<"_3_"<<madd32(i,b_3)<<"-a_"<<j<<"_4_"<<madd32(i,b_4)<<"+c_"<<j<<"_"<<i<<"-a_"<<j+1<<"_0_"<<madd32(i,b_0)<<"-a_"<<j+1<<"_1_"<<madd32(i,b_1)<<"<=2;"<<endl;
                
                outFile<<"a_"<<j<<"_1_"<<i<<"+a_"<<j<<"_3_"<<madd32(i,b_3)<<"-a_"<<j<<"_4_"<<madd32(i,b_4)<<"-c_"<<j<<"_"<<i<<"-a_"<<j+1<<"_0_"<<madd32(i,b_0)<<"+a_"<<j+1<<"_1_"<<madd32(i,b_1)<<"<=2;"<<endl;
                
                outFile<<"a_"<<j<<"_1_"<<i<<"-a_"<<j<<"_3_"<<madd32(i,b_3)<<"-a_"<<j<<"_4_"<<madd32(i,b_4)<<"+c_"<<j<<"_"<<i<<"-a_"<<j+1<<"_0_"<<madd32(i,b_0)<<"+a_"<<j+1<<"_1_"<<madd32(i,b_1)<<"<=2;"<<endl;
                
                outFile<<"-a_"<<j<<"_1_"<<i<<"+a_"<<j<<"_3_"<<madd32(i,b_3)<<"-a_"<<j<<"_4_"<<madd32(i,b_4)<<"+c_"<<j<<"_"<<i<<"-a_"<<j+1<<"_0_"<<madd32(i,b_0)<<"+a_"<<j+1<<"_1_"<<madd32(i,b_1)<<"<=2;"<<endl;
                
                //去掉S_j_2_w
                outFile<<"a_"<<j<<"_2_"<<i<<"-a_"<<j<<"_4_"<<madd32(i,b_4)<<"-c_"<<j<<"_"<<i<<"-a_"<<j+1<<"_0_"<<madd32(i,b_0)<<"-a_"<<j+1<<"_1_"<<madd32(i,b_1)<<"-a_"<<j+1<<"_2_"<<madd32(i,b_2)<<"<=0;"<<endl;
                outFile<<"a_"<<j<<"_2_"<<i<<"-a_"<<j<<"_4_"<<madd32(i,b_4)<<"+c_"<<j<<"_"<<i<<"-a_"<<j+1<<"_0_"<<madd32(i,b_0)<<"+a_"<<j+1<<"_1_"<<madd32(i,b_1)<<"-a_"<<j+1<<"_2_"<<madd32(i,b_2)<<"<=2;"<<endl;
                outFile<<"a_"<<j<<"_2_"<<i<<"-a_"<<j<<"_4_"<<madd32(i,b_4)<<"+c_"<<j<<"_"<<i<<"+a_"<<j+1<<"_0_"<<madd32(i,b_0)<<"+a_"<<j+1<<"_1_"<<madd32(i,b_1)<<"+a_"<<j+1<<"_2_"<<madd32(i,b_2)<<">=0;"<<endl;
                outFile<<"a_"<<j<<"_2_"<<i<<"-a_"<<j<<"_4_"<<madd32(i,b_4)<<"-c_"<<j<<"_"<<i<<"+a_"<<j+1<<"_0_"<<madd32(i,b_0)<<"-a_"<<j+1<<"_1_"<<madd32(i,b_1)<<"+a_"<<j+1<<"_2_"<<madd32(i,b_2)<<">=-2;"<<endl;
                outFile<<"a_"<<j<<"_2_"<<i<<"+a_"<<j<<"_4_"<<madd32(i,b_4)<<"+c_"<<j<<"_"<<i<<"+a_"<<j+1<<"_0_"<<madd32(i,b_0)<<"+a_"<<j+1<<"_1_"<<madd32(i,b_1)<<"-a_"<<j+1<<"_2_"<<madd32(i,b_2)<<">=0;"<<endl;
                outFile<<"a_"<<j<<"_2_"<<i<<"+a_"<<j<<"_4_"<<madd32(i,b_4)<<"-c_"<<j<<"_"<<i<<"+a_"<<j+1<<"_0_"<<madd32(i,b_0)<<"-a_"<<j+1<<"_1_"<<madd32(i,b_1)<<"-a_"<<j+1<<"_2_"<<madd32(i,b_2)<<">=-2;"<<endl;
                outFile<<"a_"<<j<<"_2_"<<i<<"+a_"<<j<<"_4_"<<madd32(i,b_4)<<"-c_"<<j<<"_"<<i<<"-a_"<<j+1<<"_0_"<<madd32(i,b_0)<<"-a_"<<j+1<<"_1_"<<madd32(i,b_1)<<"+a_"<<j+1<<"_2_"<<madd32(i,b_2)<<"<=2;"<<endl;
                outFile<<"a_"<<j<<"_2_"<<i<<"+a_"<<j<<"_4_"<<madd32(i,b_4)<<"+c_"<<j<<"_"<<i<<"-a_"<<j+1<<"_0_"<<madd32(i,b_0)<<"+a_"<<j+1<<"_1_"<<madd32(i,b_1)<<"+a_"<<j+1<<"_2_"<<madd32(i,b_2)<<"<=4;"<<endl;
                
                //去掉S_j_3_w
                outFile<<"a_"<<j<<"_3_"<<i<<"-c_"<<j<<"_"<<i<<"-a_"<<j+1<<"_0_"<<madd32(i,b_0)<<"-a_"<<j+1<<"_1_"<<madd32(i,b_1)<<"-a_"<<j+1<<"_2_"<<madd32(i,b_2)<<"-a_"<<j+1<<"_3_"<<madd32(i,b_3)<<"<=0;"<<endl;
                outFile<<"a_"<<j<<"_3_"<<i<<"+c_"<<j<<"_"<<i<<"-a_"<<j+1<<"_0_"<<madd32(i,b_0)<<"+a_"<<j+1<<"_1_"<<madd32(i,b_1)<<"-a_"<<j+1<<"_2_"<<madd32(i,b_2)<<"-a_"<<j+1<<"_3_"<<madd32(i,b_3)<<"<=2;"<<endl;
                outFile<<"a_"<<j<<"_3_"<<i<<"+c_"<<j<<"_"<<i<<"-a_"<<j+1<<"_0_"<<madd32(i,b_0)<<"+a_"<<j+1<<"_1_"<<madd32(i,b_1)<<"+a_"<<j+1<<"_2_"<<madd32(i,b_2)<<"+a_"<<j+1<<"_3_"<<madd32(i,b_3)<<">=0;"<<endl;
                outFile<<"a_"<<j<<"_3_"<<i<<"-c_"<<j<<"_"<<i<<"-a_"<<j+1<<"_0_"<<madd32(i,b_0)<<"-a_"<<j+1<<"_1_"<<madd32(i,b_1)<<"+a_"<<j+1<<"_2_"<<madd32(i,b_2)<<"+a_"<<j+1<<"_3_"<<madd32(i,b_3)<<">=-2;"<<endl;
                outFile<<"a_"<<j<<"_3_"<<i<<"+c_"<<j<<"_"<<i<<"+a_"<<j+1<<"_0_"<<madd32(i,b_0)<<"+a_"<<j+1<<"_1_"<<madd32(i,b_1)<<"+a_"<<j+1<<"_2_"<<madd32(i,b_2)<<"-a_"<<j+1<<"_3_"<<madd32(i,b_3)<<">=0;"<<endl;
                outFile<<"a_"<<j<<"_3_"<<i<<"-c_"<<j<<"_"<<i<<"+a_"<<j+1<<"_0_"<<madd32(i,b_0)<<"-a_"<<j+1<<"_1_"<<madd32(i,b_1)<<"+a_"<<j+1<<"_2_"<<madd32(i,b_2)<<"-a_"<<j+1<<"_3_"<<madd32(i,b_3)<<">=-2;"<<endl;
                outFile<<"a_"<<j<<"_3_"<<i<<"-c_"<<j<<"_"<<i<<"+a_"<<j+1<<"_0_"<<madd32(i,b_0)<<"-a_"<<j+1<<"_1_"<<madd32(i,b_1)<<"-a_"<<j+1<<"_2_"<<madd32(i,b_2)<<"+a_"<<j+1<<"_3_"<<madd32(i,b_3)<<"<=2;"<<endl;
                outFile<<"a_"<<j<<"_3_"<<i<<"+c_"<<j<<"_"<<i<<"+a_"<<j+1<<"_0_"<<madd32(i,b_0)<<"+a_"<<j+1<<"_1_"<<madd32(i,b_1)<<"-a_"<<j+1<<"_2_"<<madd32(i,b_2)<<"+a_"<<j+1<<"_3_"<<madd32(i,b_3)<<"<=4;"<<endl;
                
                //去掉S_j_4_w
                outFile<<"a_"<<j<<"_4_"<<i<<"-a_"<<j+1<<"_1_"<<madd32(i,b_1)<<"-a_"<<j+1<<"_2_"<<madd32(i,b_2)<<"-a_"<<j+1<<"_3_"<<madd32(i,b_3)<<"-a_"<<j+1<<"_4_"<<madd32(i,b_4)<<"<=0;"<<endl;
                outFile<<"a_"<<j<<"_4_"<<i<<"-a_"<<j+1<<"_1_"<<madd32(i,b_1)<<"+a_"<<j+1<<"_2_"<<madd32(i,b_2)<<"+a_"<<j+1<<"_3_"<<madd32(i,b_3)<<"+a_"<<j+1<<"_4_"<<madd32(i,b_4)<<">=0;"<<endl;
                outFile<<"a_"<<j<<"_4_"<<i<<"+a_"<<j+1<<"_1_"<<madd32(i,b_1)<<"+a_"<<j+1<<"_2_"<<madd32(i,b_2)<<"+a_"<<j+1<<"_3_"<<madd32(i,b_3)<<"-a_"<<j+1<<"_4_"<<madd32(i,b_4)<<">=0;"<<endl;
                outFile<<"a_"<<j<<"_4_"<<i<<"+a_"<<j+1<<"_1_"<<madd32(i,b_1)<<"-a_"<<j+1<<"_2_"<<madd32(i,b_2)<<"-a_"<<j+1<<"_3_"<<madd32(i,b_3)<<"+a_"<<j+1<<"_4_"<<madd32(i,b_4)<<"<=2;"<<endl;
                
                
            }
        }
    //末尾轮，共n轮，所以为n-1上标
    for(i=0;i<=31;i++){
        //去掉S_n-1_0_w
        outFile<<"c_"<<n-1<<"_"<<i<<"-a_"<<n-1<<"_0_"<<i<<"-a_"<<n-1<<"_2_"<<madd32(i,b_2)<<"-a_"<<n-1<<"_3_"<<madd32(i,b_3)<<"-a_"<<n-1<<"_4_"<<madd32(i,b_4)<<"<=0;"<<endl;
        outFile<<"c_"<<n-1<<"_"<<i<<"-a_"<<n-1<<"_0_"<<i<<"+a_"<<n-1<<"_2_"<<madd32(i,b_2)<<"+a_"<<n-1<<"_3_"<<madd32(i,b_3)<<"+a_"<<n-1<<"_4_"<<madd32(i,b_4)<<">=0;"<<endl;
        outFile<<"c_"<<n-1<<"_"<<i<<"+a_"<<n-1<<"_0_"<<i<<"-a_"<<n-1<<"_2_"<<madd32(i,b_2)<<"+a_"<<n-1<<"_3_"<<madd32(i,b_3)<<"+a_"<<n-1<<"_4_"<<madd32(i,b_4)<<">=0;"<<endl;
        outFile<<"c_"<<n-1<<"_"<<i<<"+a_"<<n-1<<"_0_"<<i<<"+a_"<<n-1<<"_2_"<<madd32(i,b_2)<<"-a_"<<n-1<<"_3_"<<madd32(i,b_3)<<"-a_"<<n-1<<"_4_"<<madd32(i,b_4)<<"<=2;"<<endl;
        //去掉S_n-1_1_w
        
        outFile<<"c_"<<n-1<<"_"<<i<<"-a_"<<n-1<<"_1_"<<i<<"-a_"<<n-1<<"_3_"<<madd32(i,b_3)<<"-a_"<<n-1<<"_4_"<<madd32(i,b_4)<<"<=0;"<<endl;
        outFile<<"c_"<<n-1<<"_"<<i<<"-a_"<<n-1<<"_1_"<<i<<"+a_"<<n-1<<"_3_"<<madd32(i,b_3)<<"+a_"<<n-1<<"_4_"<<madd32(i,b_4)<<">=0;"<<endl;

        outFile<<"c_"<<n-1<<"_"<<i<<"+a_"<<n-1<<"_1_"<<i<<"-a_"<<n-1<<"_3_"<<madd32(i,b_3)<<"+a_"<<n-1<<"_4_"<<madd32(i,b_4)<<">=0;"<<endl;

        outFile<<"c_"<<n-1<<"_"<<i<<"+a_"<<n-1<<"_1_"<<i<<"+a_"<<n-1<<"_3_"<<madd32(i,b_3)<<"-a_"<<n-1<<"_4_"<<madd32(i,b_4)<<"<=2;"<<endl;
        //去掉S_n-1_2_w
            
        outFile<<"c_"<<n-1<<"_"<<i<<"-a_"<<n-1<<"_2_"<<i<<"-a_"<<n-1<<"_4_"<<madd32(i,b_4)<<">=0;"<<endl;
        outFile<<"c_"<<n-1<<"_"<<i<<"-a_"<<n-1<<"_2_"<<i<<"+a_"<<n-1<<"_4_"<<madd32(i,b_4)<<">=0;"<<endl;
        //去掉S_n-1_3_w
        
        outFile<<"c_"<<n-1<<"_"<<i<<"-a_"<<n-1<<"_3_"<<i<<">=0;"<<endl;
        //去掉S_n-1_4_i
        outFile<<"a_"<<n-1<<"_4_"<<i<<"=0;"<<endl;
    }
    //不为零条件；
    for(j=0;j<=n-1;j++){
        for(i=0;i<=31;i++){
            for(k=0;k<=4;k++){
                if(i==0&&k==0) outFile<<"a_"<<j<<"_0_0";
                else outFile<<"+a_"<<j<<"_"<<k<<"_"<<i;
            }
        }
        outFile<<">=1;"<<endl;
    }

    
    return 0;
}
